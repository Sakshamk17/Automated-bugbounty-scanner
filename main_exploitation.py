import subprocess
from subdomain_scanner import find_subdomains
from port_scanner import scan_ports
from web_scraper import scrape_info
from sql_injection_scanner import scan_sql_injection
from xss_scanner import scan_xss

def main():
    print("\nAutomated Bug Bounty Scanner\n")

    #Step1 : Get target domain
    target_domain = input("Enter the target domain: ").strip()

    #Step2 : Finding subdomains
    find_subdomains(target_domain)

    #Step3 : Scanninf for the open ports
    scan_ports(target_domain)

    #Step4 : Scraping the website for emails and links
    target_url = f"https://{target_domain.removeprefix('https://')}"
    scrape_info(target_url)

    #Step5 : SQL Injection scanning
    target_url_sql= input("Enter a target URL with a parameter (e.g.,http://testphp.vulnweb.com/listproducts.php?cat=1): ").strip()
    scan_sql_injection(target_url_sql)

    #Step6 : XSS scanning
    target_url_xss= input("Enter a target URL with a parameter (e.g.,http://testphp.vulnweb.com/search.php?query=): ").strip()
    print(f"Scanning for xss vulenrabilites...")
    scan_xss(target_url_xss)

    print("\nScanning and exploitation phase completed!\n")

if __name__ == "__main__" :
    main()   